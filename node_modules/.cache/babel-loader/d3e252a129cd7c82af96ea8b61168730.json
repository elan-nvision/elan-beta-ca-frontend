{"ast":null,"code":"var _jsxFileName = \"/Users/vish/Documents/elan-beta-ca-frontend/src/App.js\";\nimport React from \"react\";\nimport { Form, FormGroup, Col, Input, Row, Button } from \"reactstrap\";\nimport $ from \"jquery\";\nimport auth0 from \"auth0-js\";\nimport \"./index.css\";\nimport axios from \"axios\";\nimport { thisExpression } from \"@babel/types\";\nlet globalRootURL = \"http://\" + window.location.host;\nconst AUTH0_CLIENT_ID = \"7ypOoXT5lMAP6B3LRvGJoD3eK0tBTrai\";\nconst AUTH0_DOMAIN = \"elan-nvision.auth0.com\";\nconst AUTH0_API_AUDIENCE = \"https://elan-nvision.auth0.com/api/v2/\";\nconst AUTH0_CALLBACK_URL = globalRootURL;\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      loggedIn: null\n    };\n    this.renderBody = this.renderBody.bind(this);\n  }\n\n  parseHash() {\n    this.auth0 = new auth0.WebAuth({\n      domain: AUTH0_DOMAIN,\n      clientID: AUTH0_CLIENT_ID\n    });\n    this.auth0.parseHash((err, authResult) => {\n      if (err) {\n        return console.log(err);\n      }\n\n      if (authResult !== null && authResult.accessToken !== null && authResult.idToken !== null) {\n        localStorage.setItem(\"access_token\", authResult.accessToken);\n        localStorage.setItem(\"id_token\", authResult.idToken);\n        localStorage.setItem(\"email\", JSON.stringify(authResult.idTokenPayload));\n        window.location = window.location.href.substr(0, window.location.href.indexOf(\"\"));\n      }\n    });\n  }\n\n  setup() {\n    $.ajaxSetup({\n      beforeSend: function (xhr) {\n        if (localStorage.getItem(\"access_token\")) {\n          xhr.setRequestHeader(\"Authorization\", \"Bearer \" + localStorage.getItem(\"access_token\"));\n        }\n      }\n    });\n  }\n\n  setState() {\n    let idToken = localStorage.getItem(\"id_token\");\n\n    if (idToken) {\n      this.state.loggedIn = true;\n    } else {\n      this.state.loggedIn = false;\n    }\n  }\n\n  componentDidMount() {\n    this.setup();\n    this.parseHash();\n    this.setState();\n  }\n\n  renderBody() {\n    if (this.state.loggedIn) return React.createElement(LoggedIn, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    });else return React.createElement(Home, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    });\n  }\n\n  render() {\n    return this.state.loggedIn === undefined ? React.createElement(\"div\", {\n      className: \"loader\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"Loading\") : React.createElement(this.renderBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    });\n  }\n\n}\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.authenticate = this.authenticate.bind(this);\n  }\n\n  componentDidMount() {\n    this.authenticate();\n  }\n\n  authenticate() {\n    this.WebAuth = new auth0.WebAuth({\n      domain: AUTH0_DOMAIN,\n      clientID: AUTH0_CLIENT_ID,\n      scope: \"openid email\",\n      audience: AUTH0_API_AUDIENCE,\n      responseType: \"token id_token\",\n      redirectUri: AUTH0_CALLBACK_URL\n    });\n    this.WebAuth.authorize();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    });\n  }\n\n}\n\nclass LoggedIn extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      firstTime: null,\n      fname: \"\",\n      lname: \"\",\n      institute: \"\",\n      age: null,\n      points: null,\n      no_of_people: null\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.renderForm = this.renderForm.bind(this);\n    this.renderPoints = this.renderPoints.bind(this);\n    this.submitForm = this.submitForm.bind(this);\n    this.getData = this.getData.bind(this);\n    this.logout = this.logout.bind(this);\n  }\n\n  componentDidMount() {\n    let requestURL = \"http://localhost:8080/doesuserexist/\" + JSON.parse(localStorage.getItem(\"email\")).email;\n    axios.get(requestURL).then(res => {\n      this.setState({\n        firstTime: !(res.data.message == \"true\")\n      });\n    });\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\n    const name = target.name;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  getData() {\n    const headers = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: \"Bearer \" + localStorage.getItem(\"access_token\"),\n        Id_token: localStorage.getItem(\"id_token\")\n      }\n    };\n    let url = \"http://localhost:8080/api/private\";\n    axios.get(url, headers).then(res => {\n      this.setState({\n        fname: res.data.fname,\n        lname: res.data.lname,\n        no_of_people: res.data.no_of_people,\n        points: res.data.points\n      });\n    });\n  }\n\n  submitForm(event) {\n    event.preventDefault();\n    const headers = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: \"Bearer \" + localStorage.getItem(\"access_token\"),\n        Id_token: localStorage.getItem(\"id_token\")\n      }\n    };\n    let url = \"http://localhost:8080/api/private?fname=\" + this.state.fname + \"&lname=\" + this.state.lname + \"&institute=\" + this.state.institute + \"&age=\" + this.state.age;\n    axios.get(url, headers).then(res => {\n      window.location.reload();\n    });\n  }\n\n  renderForm() {\n    return React.createElement(\"div\", {\n      id: \"fh5co-couple\",\n      style: {\n        paddingTop: \"20px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-8 col-md-offset-2 text-center fh5co-heading animate-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Registration Portal\"), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, \"For Campus Ambassadors\"), React.createElement(Form, {\n      style: {\n        marginTop: \"50px\"\n      },\n      onSubmit: this.submitForm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(Row, {\n      form: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(Col, {\n      md: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"text\",\n      name: \"fname\",\n      value: this.state.fname,\n      placeholder: \"First Name\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      md: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"text\",\n      name: \"lname\",\n      value: this.state.lname,\n      placeholder: \"Last Name\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    })))), React.createElement(Row, {\n      form: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(Col, {\n      md: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"text\",\n      name: \"institute\",\n      placeholder: \"Institute\",\n      value: this.state.institute,\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      md: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"text\",\n      name: \"age\",\n      value: this.state.age,\n      onChange: this.handleInputChange,\n      placeholder: \"Age\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    })))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"primary\",\n      style: {\n        marginTop: \"30px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, \"Submit\")))))));\n  }\n\n  logout() {\n    localStorage.clear();\n    window.location.reload();\n  }\n\n  renderPoints() {\n    if (this.state.no_of_people == null) {\n      this.getData();\n      return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, \"Loading\");\n    } else {\n      return React.createElement(\"div\", {\n        id: \"fh5co-couple\",\n        style: {\n          paddingTop: \"20px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-8 col-md-offset-2 text-center fh5co-heading animate-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }, \"Elan & nVision 2020\"), React.createElement(\"h3\", {\n        style: {\n          marginTop: \"40px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, \"Welcome, \", this.state.fname, \" \", this.state.lname), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, \"You have been awarded \", this.state.points, \" points since\", \" \", this.state.no_of_people, \" people have used your referral code.\"), React.createElement(Button, {\n        color: \"primary\",\n        onClick: this.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, \"LOGOUT\")))));\n    }\n  }\n\n  render() {\n    if (this.state.firstTime === true) {\n      return React.createElement(this.renderForm, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      });\n    } else if (this.state.firstTime === false) {\n      return React.createElement(this.renderPoints, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      });\n    } else {\n      return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, \"Loading\");\n    }\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/vish/Documents/elan-beta-ca-frontend/src/App.js"],"names":["React","Form","FormGroup","Col","Input","Row","Button","$","auth0","axios","thisExpression","globalRootURL","window","location","host","AUTH0_CLIENT_ID","AUTH0_DOMAIN","AUTH0_API_AUDIENCE","AUTH0_CALLBACK_URL","App","Component","constructor","state","loggedIn","renderBody","bind","parseHash","WebAuth","domain","clientID","err","authResult","console","log","accessToken","idToken","localStorage","setItem","JSON","stringify","idTokenPayload","href","substr","indexOf","setup","ajaxSetup","beforeSend","xhr","getItem","setRequestHeader","setState","componentDidMount","render","undefined","Home","props","authenticate","scope","audience","responseType","redirectUri","authorize","LoggedIn","firstTime","fname","lname","institute","age","points","no_of_people","handleInputChange","renderForm","renderPoints","submitForm","getData","logout","requestURL","parse","email","get","then","res","data","message","event","target","value","type","checked","name","headers","authorization","Id_token","url","preventDefault","reload","paddingTop","marginTop","clear"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Form, FormGroup, Col, Input, Row, Button } from \"reactstrap\";\nimport $ from \"jquery\";\nimport auth0 from \"auth0-js\";\nimport \"./index.css\";\nimport axios from \"axios\";\nimport { thisExpression } from \"@babel/types\";\n\nlet globalRootURL = \"http://\" + window.location.host;\n\nconst AUTH0_CLIENT_ID = \"7ypOoXT5lMAP6B3LRvGJoD3eK0tBTrai\";\nconst AUTH0_DOMAIN = \"elan-nvision.auth0.com\";\nconst AUTH0_API_AUDIENCE = \"https://elan-nvision.auth0.com/api/v2/\";\nconst AUTH0_CALLBACK_URL = globalRootURL;\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = { loggedIn: null };\n    this.renderBody = this.renderBody.bind(this);\n  }\n  parseHash() {\n    this.auth0 = new auth0.WebAuth({\n      domain: AUTH0_DOMAIN,\n      clientID: AUTH0_CLIENT_ID\n    });\n    this.auth0.parseHash((err, authResult) => {\n      if (err) {\n        return console.log(err);\n      }\n      if (\n        authResult !== null &&\n        authResult.accessToken !== null &&\n        authResult.idToken !== null\n      ) {\n        localStorage.setItem(\"access_token\", authResult.accessToken);\n        localStorage.setItem(\"id_token\", authResult.idToken);\n        localStorage.setItem(\n          \"email\",\n          JSON.stringify(authResult.idTokenPayload)\n        );\n        window.location = window.location.href.substr(\n          0,\n          window.location.href.indexOf(\"\")\n        );\n      }\n    });\n  }\n  setup() {\n    $.ajaxSetup({\n      beforeSend: function(xhr) {\n        if (localStorage.getItem(\"access_token\")) {\n          xhr.setRequestHeader(\n            \"Authorization\",\n            \"Bearer \" + localStorage.getItem(\"access_token\")\n          );\n        }\n      }\n    });\n  }\n  setState() {\n    let idToken = localStorage.getItem(\"id_token\");\n    if (idToken) {\n      this.state.loggedIn = true;\n    } else {\n      this.state.loggedIn = false;\n    }\n  }\n  componentDidMount() {\n    this.setup();\n    this.parseHash();\n    this.setState();\n  }\n  renderBody() {\n    if (this.state.loggedIn) return <LoggedIn />;\n    else return <Home />;\n  }\n\n  render() {\n    return this.state.loggedIn === undefined ? (\n      <div className=\"loader\">Loading</div>\n    ) : (\n      <this.renderBody />\n    );\n  }\n}\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.authenticate = this.authenticate.bind(this);\n  }\n  componentDidMount() {\n    this.authenticate();\n  }\n  authenticate() {\n    this.WebAuth = new auth0.WebAuth({\n      domain: AUTH0_DOMAIN,\n      clientID: AUTH0_CLIENT_ID,\n      scope: \"openid email\",\n      audience: AUTH0_API_AUDIENCE,\n      responseType: \"token id_token\",\n      redirectUri: AUTH0_CALLBACK_URL\n    });\n    this.WebAuth.authorize();\n  }\n\n  render() {\n    return <div></div>;\n  }\n}\n\nclass LoggedIn extends React.Component {\n  state = {\n    firstTime: null,\n    fname: \"\",\n    lname: \"\",\n    institute: \"\",\n    age: null,\n    points: null,\n    no_of_people: null\n  };\n  constructor(props) {\n    super(props);\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.renderForm = this.renderForm.bind(this);\n    this.renderPoints = this.renderPoints.bind(this);\n    this.submitForm = this.submitForm.bind(this);\n    this.getData = this.getData.bind(this);\n    this.logout = this.logout.bind(this);\n  }\n  componentDidMount() {\n    let requestURL =\n      \"http://localhost:8080/doesuserexist/\" +\n      JSON.parse(localStorage.getItem(\"email\")).email;\n    axios.get(requestURL).then(res => {\n      this.setState({ firstTime: !(res.data.message == \"true\") });\n    });\n  }\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\n    const name = target.name;\n\n    this.setState({\n      [name]: value\n    });\n  }\n  getData() {\n    const headers = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: \"Bearer \" + localStorage.getItem(\"access_token\"),\n        Id_token: localStorage.getItem(\"id_token\")\n      }\n    };\n    let url = \"http://localhost:8080/api/private\";\n    axios.get(url, headers).then(res => {\n      this.setState({\n        fname: res.data.fname,\n        lname: res.data.lname,\n        no_of_people: res.data.no_of_people,\n        points: res.data.points\n      });\n    });\n  }\n  submitForm(event) {\n    event.preventDefault();\n    const headers = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: \"Bearer \" + localStorage.getItem(\"access_token\"),\n        Id_token: localStorage.getItem(\"id_token\")\n      }\n    };\n    let url =\n      \"http://localhost:8080/api/private?fname=\" +\n      this.state.fname +\n      \"&lname=\" +\n      this.state.lname +\n      \"&institute=\" +\n      this.state.institute +\n      \"&age=\" +\n      this.state.age;\n    axios.get(url, headers).then(res => {\n      window.location.reload();\n    });\n  }\n\n  renderForm() {\n    return (\n      <div id=\"fh5co-couple\" style={{ paddingTop: \"20px\" }}>\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-md-8 col-md-offset-2 text-center fh5co-heading animate-box\">\n              <h2>Registration Portal</h2>\n              <h3>For Campus Ambassadors</h3>\n              <Form style={{ marginTop: \"50px\" }} onSubmit={this.submitForm}>\n                <Row form>\n                  <Col md={6}>\n                    <FormGroup>\n                      <Input\n                        type=\"text\"\n                        name=\"fname\"\n                        value={this.state.fname}\n                        placeholder=\"First Name\"\n                        onChange={this.handleInputChange}\n                      />\n                    </FormGroup>\n                  </Col>\n                  <Col md={6}>\n                    <FormGroup>\n                      <Input\n                        type=\"text\"\n                        name=\"lname\"\n                        value={this.state.lname}\n                        placeholder=\"Last Name\"\n                        onChange={this.handleInputChange}\n                      />\n                    </FormGroup>\n                  </Col>\n                </Row>\n                <Row form>\n                  <Col md={6}>\n                    <FormGroup>\n                      <Input\n                        type=\"text\"\n                        name=\"institute\"\n                        placeholder=\"Institute\"\n                        value={this.state.institute}\n                        onChange={this.handleInputChange}\n                      />\n                    </FormGroup>\n                  </Col>\n                  <Col md={6}>\n                    <FormGroup>\n                      <Input\n                        type=\"text\"\n                        name=\"age\"\n                        value={this.state.age}\n                        onChange={this.handleInputChange}\n                        placeholder=\"Age\"\n                      />\n                    </FormGroup>\n                  </Col>\n                </Row>\n                <Row>\n                  <Button color=\"primary\" style={{ marginTop: \"30px\" }}>\n                    Submit\n                  </Button>\n                </Row>\n              </Form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  logout() {\n    localStorage.clear();\n    window.location.reload();\n  }\n  renderPoints() {\n    if (this.state.no_of_people == null) {\n      this.getData();\n      return <p>Loading</p>;\n    } else {\n      return (\n        <div id=\"fh5co-couple\" style={{ paddingTop: \"20px\" }}>\n          <div className=\"container\">\n            <div className=\"row\">\n              <div className=\"col-md-8 col-md-offset-2 text-center fh5co-heading animate-box\">\n                <h2>Elan & nVision 2020</h2>\n                <h3 style={{ marginTop: \"40px\" }}>\n                  Welcome, {this.state.fname} {this.state.lname}\n                </h3>\n                <h4>\n                  You have been awarded {this.state.points} points since{\" \"}\n                  {this.state.no_of_people} people have used your referral code.\n                </h4>\n                <Button color=\"primary\" onClick={this.logout}>\n                  LOGOUT\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    }\n  }\n  render() {\n    if (this.state.firstTime === true) {\n      return <this.renderForm />;\n    } else if (this.state.firstTime === false) {\n      return <this.renderPoints />;\n    } else {\n      return <p>Loading</p>;\n    }\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}