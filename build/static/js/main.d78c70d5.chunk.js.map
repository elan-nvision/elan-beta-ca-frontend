{"version":3,"sources":["App.js","serviceWorker.js","index.js"],"names":["globalRootURL","window","location","host","AUTH0_CALLBACK_URL","App","state","loggedIn","renderBody","bind","setup","parseHash","setState","this","auth0","WebAuth","domain","clientID","err","authResult","console","log","accessToken","idToken","localStorage","setItem","JSON","stringify","idTokenPayload","href","substr","indexOf","$","ajaxSetup","beforeSend","xhr","getItem","setRequestHeader","undefined","className","React","Component","Home","props","authenticate","scope","audience","responseType","redirectUri","authorize","LoggedIn","firstTime","fname","lname","institute","age","points","no_of_people","rcode","handleInputChange","renderForm","renderPoints","submitForm","getData","logout","requestURL","parse","email","axios","get","then","res","data","message","event","target","value","type","checked","name","headers","authorization","url","preventDefault","reload","id","style","paddingTop","Form","marginTop","onSubmit","Row","form","Col","md","FormGroup","Input","placeholder","onChange","Button","color","clear","onClick","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d78c70d5.chunk.js","sourcesContent":["import React from \"react\";\nimport { Form, FormGroup, Col, Input, Row, Button } from \"reactstrap\";\nimport $ from \"jquery\";\nimport auth0 from \"auth0-js\";\nimport \"./index.css\";\nimport axios from \"axios\";\nimport { thisExpression } from \"@babel/types\";\n\nlet globalRootURL = \"http://\" + window.location.host;\n\nconst AUTH0_CLIENT_ID = \"7ypOoXT5lMAP6B3LRvGJoD3eK0tBTrai\";\nconst AUTH0_DOMAIN = \"elan-nvision.auth0.com\";\nconst AUTH0_API_AUDIENCE = \"https://elan-nvision.auth0.com/api/v2/\";\nconst AUTH0_CALLBACK_URL = globalRootURL;\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = { loggedIn: null };\n    this.renderBody = this.renderBody.bind(this);\n    this.setup();\n    this.parseHash();\n    this.setState();\n  }\n  parseHash() {\n    this.auth0 = new auth0.WebAuth({\n      domain: AUTH0_DOMAIN,\n      clientID: AUTH0_CLIENT_ID\n    });\n    this.auth0.parseHash((err, authResult) => {\n      if (err) {\n        return console.log(err);\n      }\n      if (\n        authResult !== null &&\n        authResult.accessToken !== null &&\n        authResult.idToken !== null\n      ) {\n        localStorage.setItem(\"access_token\", authResult.accessToken);\n        localStorage.setItem(\"id_token\", authResult.idToken);\n        localStorage.setItem(\n          \"email\",\n          JSON.stringify(authResult.idTokenPayload)\n        );\n        window.location = window.location.href.substr(\n          0,\n          window.location.href.indexOf(\"\")\n        );\n      }\n    });\n  }\n  setup() {\n    $.ajaxSetup({\n      beforeSend: function(xhr) {\n        if (localStorage.getItem(\"access_token\")) {\n          xhr.setRequestHeader(\n            \"Authorization\",\n            \"Bearer \" + localStorage.getItem(\"access_token\")\n          );\n        }\n      }\n    });\n  }\n  setState() {\n    let idToken = localStorage.getItem(\"id_token\");\n    if (idToken) {\n      this.state.loggedIn = true;\n    } else {\n      this.state.loggedIn = false;\n    }\n  }\n  // componentWillMount() {\n  //   this.setup();\n  //   this.parseHash();\n  //   this.setState();\n  // }\n  renderBody() {\n    if (this.state.loggedIn) return <LoggedIn />;\n    else return <Home />;\n  }\n\n  render() {\n    return this.state.loggedIn === undefined ? (\n      <div className=\"loader\">Loading</div>\n    ) : (\n      <this.renderBody />\n    );\n  }\n}\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.authenticate = this.authenticate.bind(this);\n  }\n  componentDidMount() {\n    this.authenticate();\n  }\n  authenticate() {\n    this.WebAuth = new auth0.WebAuth({\n      domain: AUTH0_DOMAIN,\n      clientID: AUTH0_CLIENT_ID,\n      scope: \"openid email\",\n      audience: AUTH0_API_AUDIENCE,\n      responseType: \"token id_token\",\n      redirectUri: AUTH0_CALLBACK_URL\n    });\n    this.WebAuth.authorize();\n  }\n\n  render() {\n    return <div></div>;\n  }\n}\n\nclass LoggedIn extends React.Component {\n  state = {\n    firstTime: null,\n    fname: \"\",\n    lname: \"\",\n    institute: \"\",\n    age: null,\n    points: null,\n    no_of_people: null,\n    rcode: null\n  };\n  constructor(props) {\n    super(props);\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.renderForm = this.renderForm.bind(this);\n    this.renderPoints = this.renderPoints.bind(this);\n    this.submitForm = this.submitForm.bind(this);\n    this.getData = this.getData.bind(this);\n    this.logout = this.logout.bind(this);\n  }\n  componentDidMount() {\n    let requestURL =\n      \"https://ca.elan.org.in/doesuserexist/\" +\n      JSON.parse(localStorage.getItem(\"email\")).email;\n    axios.get(requestURL).then(res => {\n      this.setState({ firstTime: !(res.data.message == \"true\") });\n    });\n  }\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\n    const name = target.name;\n\n    this.setState({\n      [name]: value\n    });\n  }\n  getData() {\n    const headers = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: \"Bearer \" + localStorage.getItem(\"access_token\")\n      }\n    };\n    let url =\n      \"https://ca.elan.org.in/api/private?token=\" +\n      localStorage.getItem(\"id_token\");\n    axios.get(url, headers).then(res => {\n      this.setState({\n        fname: res.data.fname,\n        lname: res.data.lname,\n        no_of_people: res.data.no_of_people,\n        points: res.data.points,\n        rcode: res.data.rcode\n      });\n    });\n  }\n  submitForm(event) {\n    event.preventDefault();\n    const headers = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: \"Bearer \" + localStorage.getItem(\"access_token\")\n      }\n    };\n    let url =\n      \"https://ca.elan.org.in/api/private?fname=\" +\n      this.state.fname +\n      \"&lname=\" +\n      this.state.lname +\n      \"&institute=\" +\n      this.state.institute +\n      \"&age=\" +\n      this.state.age +\n      \"&token=\" +\n      localStorage.getItem(\"id_token\");\n    axios.get(url, headers).then(res => {\n      window.location.reload();\n    });\n  }\n\n  renderForm() {\n    return (\n      <div id=\"fh5co-couple\" style={{ paddingTop: \"20px\" }}>\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-md-8 col-md-offset-2 text-center fh5co-heading animate-box\">\n              <h2>Registration Portal</h2>\n              <h3>For Campus Ambassadors</h3>\n              <Form style={{ marginTop: \"50px\" }} onSubmit={this.submitForm}>\n                <Row form>\n                  <Col md={6}>\n                    <FormGroup>\n                      <Input\n                        type=\"text\"\n                        name=\"fname\"\n                        value={this.state.fname}\n                        placeholder=\"First Name\"\n                        onChange={this.handleInputChange}\n                      />\n                    </FormGroup>\n                  </Col>\n                  <Col md={6}>\n                    <FormGroup>\n                      <Input\n                        type=\"text\"\n                        name=\"lname\"\n                        value={this.state.lname}\n                        placeholder=\"Last Name\"\n                        onChange={this.handleInputChange}\n                      />\n                    </FormGroup>\n                  </Col>\n                </Row>\n                <Row form>\n                  <Col md={6}>\n                    <FormGroup>\n                      <Input\n                        type=\"text\"\n                        name=\"institute\"\n                        placeholder=\"Institute\"\n                        value={this.state.institute}\n                        onChange={this.handleInputChange}\n                      />\n                    </FormGroup>\n                  </Col>\n                  <Col md={6}>\n                    <FormGroup>\n                      <Input\n                        type=\"text\"\n                        name=\"age\"\n                        value={this.state.age}\n                        onChange={this.handleInputChange}\n                        placeholder=\"Age\"\n                      />\n                    </FormGroup>\n                  </Col>\n                </Row>\n                <Row>\n                  <Button color=\"primary\" style={{ marginTop: \"30px\" }}>\n                    Submit\n                  </Button>\n                </Row>\n              </Form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  logout() {\n    localStorage.clear();\n    window.location.reload();\n  }\n  renderPoints() {\n    if (this.state.no_of_people == null) {\n      this.getData();\n      return <p>Loading</p>;\n    } else {\n      return (\n        <div id=\"fh5co-couple\" style={{ paddingTop: \"20px\" }}>\n          <div className=\"container\">\n            <div className=\"row\">\n              <div className=\"col-md-8 col-md-offset-2 text-center fh5co-heading animate-box\">\n                <h2>Elan & nVision 2020</h2>\n                <h3 style={{ marginTop: \"40px\" }}>\n                  Welcome, {this.state.fname} {this.state.lname}\n                </h3>\n                <h4>Your referral code is {this.state.rcode}.</h4>\n                <h4>\n                  You have been awarded {this.state.points} points since{\" \"}\n                  {this.state.no_of_people} people have used your referral code.\n                </h4>\n                <Button color=\"primary\" onClick={this.logout}>\n                  LOGOUT\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    }\n  }\n  render() {\n    if (this.state.firstTime === true) {\n      return <this.renderForm />;\n    } else if (this.state.firstTime === false) {\n      return <this.renderPoints />;\n    } else {\n      return <p>Loading</p>;\n    }\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}