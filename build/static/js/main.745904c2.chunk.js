(window["webpackJsonpelan-beta-ca-frontend"]=window["webpackJsonpelan-beta-ca-frontend"]||[]).push([[0],{109:function(e,t,a){e.exports=a(270)},270:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),l=a(104),i=a.n(l),r=(a(56),a(105)),c=a(31),s=a(32),u=a(35),m=a(33),d=a(3),h=a(36),p=a(272),g=a(273),f=a(274),v=a(275),b=a(276),E=a(277),y=a(106),k=a.n(y),O=a(54),w=a(34),j=a.n(w),I=(a(132),"http://"+window.location.host),S=I,T=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).state={loggedIn:null},e.renderBody=e.renderBody.bind(Object(d.a)(e)),e.setup(),e.parseHash(),e.setState(),e}return Object(h.a)(t,e),Object(s.a)(t,[{key:"parseHash",value:function(){this.auth0=new O.a.WebAuth({domain:"elan-nvision.auth0.com",clientID:"7ypOoXT5lMAP6B3LRvGJoD3eK0tBTrai"}),this.auth0.parseHash((function(e,t){if(e)return console.log(e);null!==t&&null!==t.accessToken&&null!==t.idToken&&(localStorage.setItem("access_token",t.accessToken),localStorage.setItem("id_token",t.idToken),localStorage.setItem("email",JSON.stringify(t.idTokenPayload)),window.location=window.location.href.substr(0,window.location.href.indexOf("")))}))}},{key:"setup",value:function(){k.a.ajaxSetup({beforeSend:function(e){localStorage.getItem("access_token")&&e.setRequestHeader("Authorization","Bearer "+localStorage.getItem("access_token"))}})}},{key:"setState",value:function(){var e=localStorage.getItem("id_token");this.state.loggedIn=!!e}},{key:"renderBody",value:function(){return this.state.loggedIn?o.a.createElement(x,null):o.a.createElement(_,null)}},{key:"render",value:function(){return void 0===this.state.loggedIn?o.a.createElement("div",{className:"loader"},"Loading"):o.a.createElement(this.renderBody,null)}}]),t}(o.a.Component),_=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).authenticate=a.authenticate.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.authenticate()}},{key:"authenticate",value:function(){this.WebAuth=new O.a.WebAuth({domain:"elan-nvision.auth0.com",clientID:"7ypOoXT5lMAP6B3LRvGJoD3eK0tBTrai",scope:"openid email",audience:"https://elan-nvision.auth0.com/api/v2/",responseType:"token id_token",redirectUri:S}),this.WebAuth.authorize()}},{key:"render",value:function(){return o.a.createElement("div",null)}}]),t}(o.a.Component),x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={firstTime:null,fname:"",lname:"",institute:"",age:null,points:null,no_of_people:null,rcode:null},a.handleInputChange=a.handleInputChange.bind(Object(d.a)(a)),a.renderForm=a.renderForm.bind(Object(d.a)(a)),a.renderPoints=a.renderPoints.bind(Object(d.a)(a)),a.submitForm=a.submitForm.bind(Object(d.a)(a)),a.getData=a.getData.bind(Object(d.a)(a)),a.logout=a.logout.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t="https://ca.elan.org.in/doesuserexist/"+JSON.parse(localStorage.getItem("email")).email;j.a.get(t).then((function(t){e.setState({firstTime:!("true"==t.data.message)})}))}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(r.a)({},n,a))}},{key:"getData",value:function(){var e=this,t={headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("access_token"),Id_token:localStorage.getItem("id_token")}};j.a.get("https://ca.elan.org.in/api/private",t).then((function(t){e.setState({fname:t.data.fname,lname:t.data.lname,no_of_people:t.data.no_of_people,points:t.data.points,rcode:t.data.rcode})}))}},{key:"submitForm",value:function(e){e.preventDefault();var t={headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("access_token"),"Proxy-Authorization":localStorage.getItem("id_token")}},a="https://ca.elan.org.in/api/private?fname="+this.state.fname+"&lname="+this.state.lname+"&institute="+this.state.institute+"&age="+this.state.age;j.a.get(a,t).then((function(e){window.location.reload()}))}},{key:"renderForm",value:function(){return o.a.createElement("div",{id:"fh5co-couple",style:{paddingTop:"20px"}},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-8 col-md-offset-2 text-center fh5co-heading animate-box"},o.a.createElement("h2",null,"Registration Portal"),o.a.createElement("h3",null,"For Campus Ambassadors"),o.a.createElement(p.a,{style:{marginTop:"50px"},onSubmit:this.submitForm},o.a.createElement(g.a,{form:!0},o.a.createElement(f.a,{md:6},o.a.createElement(v.a,null,o.a.createElement(b.a,{type:"text",name:"fname",value:this.state.fname,placeholder:"First Name",onChange:this.handleInputChange}))),o.a.createElement(f.a,{md:6},o.a.createElement(v.a,null,o.a.createElement(b.a,{type:"text",name:"lname",value:this.state.lname,placeholder:"Last Name",onChange:this.handleInputChange})))),o.a.createElement(g.a,{form:!0},o.a.createElement(f.a,{md:6},o.a.createElement(v.a,null,o.a.createElement(b.a,{type:"text",name:"institute",placeholder:"Institute",value:this.state.institute,onChange:this.handleInputChange}))),o.a.createElement(f.a,{md:6},o.a.createElement(v.a,null,o.a.createElement(b.a,{type:"text",name:"age",value:this.state.age,onChange:this.handleInputChange,placeholder:"Age"})))),o.a.createElement(g.a,null,o.a.createElement(E.a,{color:"primary",style:{marginTop:"30px"}},"Submit")))))))}},{key:"logout",value:function(){localStorage.clear(),window.location.reload()}},{key:"renderPoints",value:function(){return null==this.state.no_of_people?(this.getData(),o.a.createElement("p",null,"Loading")):o.a.createElement("div",{id:"fh5co-couple",style:{paddingTop:"20px"}},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-8 col-md-offset-2 text-center fh5co-heading animate-box"},o.a.createElement("h2",null,"Elan & nVision 2020"),o.a.createElement("h3",{style:{marginTop:"40px"}},"Welcome, ",this.state.fname," ",this.state.lname),o.a.createElement("h4",null,"Your referral code is ",this.state.rcode,"."),o.a.createElement("h4",null,"You have been awarded ",this.state.points," points since"," ",this.state.no_of_people," people have used your referral code."),o.a.createElement(E.a,{color:"primary",onClick:this.logout},"LOGOUT")))))}},{key:"render",value:function(){return!0===this.state.firstTime?o.a.createElement(this.renderForm,null):!1===this.state.firstTime?o.a.createElement(this.renderPoints,null):o.a.createElement("p",null,"Loading")}}]),t}(o.a.Component),C=T;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},56:function(e,t,a){}},[[109,1,2]]]);
//# sourceMappingURL=main.745904c2.chunk.js.map